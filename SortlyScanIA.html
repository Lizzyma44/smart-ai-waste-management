<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Waste Detection - Arduino Serial</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0/dist/mobilenet.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2/dist/coco-ssd.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="arduinoStatus" class="arduino-status">
        üîå Arduino Desconectado
    </div>

    <div id="loadingScreen" class="loading-screen">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <div class="loading-text">Cargando modelo de IA</div>
            <div class="loading-details" id="loadingDetails">
                Initializing TensorFlow.js and MobileNet for Arduino integration...
            </div>
        </div>
    </div>

    <div id="mainInterface" class="main-container" style="display: none;">
        <div class="header">
            <div class="header-card">
                <h1 class="header-title">ü§ñ Smart Waste Detection</h1>
                <p class="header-subtitle">Arduino Serial Communication Enabled</p>
            </div>
        </div>

        <div class="camera-container">
            <video id="video" autoplay muted playsinline></video>
            <canvas id="detectionCanvas" class="detection-overlay"></canvas>
        </div>

        <div id="statusIndicator" class="status-indicator info">
            Loading AI models... Please wait.
        </div>

        <div id="autoIndicator" class="auto-indicator">
            üîÑ AUTO DETECTING...
        </div>

        <div class="controls-panel">
            <button id="connectArduino" class="control-button arduino">üîå Connect Arduino</button>
            <button id="startBtn" class="control-button primary">üé• Start</button>
            <button id="stopBtn" class="control-button danger" disabled>‚èπÔ∏è Stop</button>
            <button id="detectBtn" class="control-button" disabled>üîç Detect</button>
           
            <div class="auto-toggle">
                <span class="auto-toggle-label">Auto</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="autoToggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div id="infoPanel" class="info-panel">
            <div class="waste-category-display">
                <div class="waste-category-large unknown" id="wasteCategoryLarge">
                    READY
                </div>
            </div>
           
            <div class="info-details">
                <div class="info-item">
                    <div class="info-value" id="confidenceValue">--</div>
                    <div class="info-label">Confidence</div>
                </div>
                <div class="info-item">
                    <div class="info-value" id="processingValue">--</div>
                    <div class="info-label">Time (s)</div>
                </div>
                <div class="info-item">
                    <div class="info-value" id="totalCount">0</div>
                    <div class="info-label">Total</div>
                </div>
                <div class="info-item">
                    <div class="info-value" id="accuracyValue">--</div>
                    <div class="info-label">Session Avg</div>
                </div>
            </div>
        </div>

        <div class="serial-panel">
            <h3 class="serial-title">üì° Serial Monitor</h3>
            <div id="serialLog" class="serial-log">
                > Arduino Serial Monitor<br>
                > Waiting for connection...<br>
            </div>
            <div class="serial-commands">
                <div class="command-item">
                    <span>Wet Waste:</span>
                    <span class="command-code">'w'</span>
                </div>
                <div class="command-item">
                    <span>Paper Waste:</span>
                    <span class="command-code">'p'</span>
                </div>
                <div class="command-item">
                    <span>Plastic Waste:</span>
                    <span class="command-code">'l'</span>
                </div>
                <div class="command-item">
                    <span>Glass Waste:</span>
                    <span class="command-code">'g'</span>
                </div>
                <div class="command-item">
                    <span>Electronic Waste:</span>
                    <span class="command-code">'e'</span>
                </div>
                <div class="command-item">
                    <span>Can Waste:</span>
                    <span class="command-code">'c'</span>
                </div>
            </div>
        </div>
    </div>

    <script src="Java.js"></script>
</body>
</html>
